ðŸŒ [English](README.md) | [í•œêµ­ì–´](README.ko.md)

# claude-config

A repository for managing Claude Code settings â€” both global and home-level.

Syncs via **file copy** through a script â€” no symlinks.

## Managed Files

| Repo Path | Local Path | Purpose |
|---|---|---|
| `CLAUDE.md` | `~/.claude/CLAUDE.md` | Global behavior instructions (applied to all projects) |
| `settings.json` | `~/.claude/settings.json` | Global model, permissions, hooks settings |
| `home/CLAUDE.md` | `~/home/CLAUDE.md` | Home-level project instructions |
| `home/settings.json` | `~/home/.claude/settings.json` | Home-level permissions |
| `home/*.md` (auto) | `~/home/*.md` | Knowledge files (auto-discovered, excluding CLAUDE.md) |

## New Machine Setup

```bash
git clone git@github.com:WoojinAhn/claude-config.git ~/path/to/claude-config
cd ~/path/to/claude-config
./sync.sh setup
```

`setup` will:
1. Show diff between repo and local for each managed file
2. Ask whether to overwrite each file (local file is backed up as `*.bak`)
3. Create directories if needed (`~/home/.claude/`, etc.)
4. Install `push-config.sh` into `~/.claude/` (used by the auto-push hook)

## Usage

```bash
# Show diff between repo and local
./sync.sh diff

# Pull: remote -> local (also reinstalls push-config.sh)
./sync.sh pull

# Push: local -> remote (manual)
./sync.sh push

# Check sync status
./sync.sh status
```

## Auto-Sync

### Auto-Pull (SessionStart)

On new session startup, the `SessionStart` hook runs `sync.sh pull`. It fetches from remote and only pulls if there are changes â€” no-op otherwise.

### Auto-Push (PostToolUse)

The `PostToolUse` hook triggers `~/.claude/push-config.sh` on every `Write|Edit` in Claude Code sessions. This script is generated by `setup` with the repo path baked in â€” no hardcoded paths in committed files.

## Adding Files

- **`~/home/*.md`**: Automatically discovered â€” just create the file and it will be synced.
- **Other files**: Add entries to the `SYNC_PAIRS` array in `sync.sh`:

```bash
SYNC_PAIRS=(
    "$CLAUDE_DIR/CLAUDE.md|CLAUDE.md|[global] CLAUDE.md"
    ...
    "$HOME_DIR/.claude/newfile.json|home/newfile.json|[home] newfile.json"
)
```
